{% load static %}
<!DOCTYPE html>
<html>
	<head>
		<title>Django Ecommerce</title>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	    <meta name="description" content="Django Ecommerce">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="icon" href="/static/images/favicon.png" type="image/gif" sizes="16x16">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
		<link rel='stylesheet' type="text/css" href="{% static 'css/main.css' %}">
		<script type="text/javascript">
			var user='{{request.user}}'

			function getToken(name) {
			    let cookieValue = null;
			    if (document.cookie && document.cookie !== '') {
			        const cookies = document.cookie.split(';');
			        for (let i = 0; i < cookies.length; i++) {
			            const cookie = cookies[i].trim();
			            if (cookie.substring(0, name.length + 1) === (name + '=')) {
			                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
			                break;
			            }
			        }
			    }
			    return cookieValue;
			}
			var csrftoken = getToken('csrftoken');


			function getCookie(name){
				var cookieArr=document.cookie.split(";")

				for(var i=0;i<cookieArr.length;i++)
				{
					var cookiePair=cookieArr[i].split("=");

					if(name==cookiePair[0].trim())
					{
						return decodeURIComponent(cookiePair[1])
					}
				}
				return null;
			}
			var cart = JSON.parse(getCookie('cart'))
			if(cart==undefined){
				cart = {}
				console.log('Cart was created')
				document.cookie='cart='+JSON.stringify(cart) + ";domain=;path=/"
			}

			console.log('Cart:',cart)
		</script>
	</head>
	<body>

		{% include 'store/navbar.html' %}

		<div class="container">
		{% block content%}

		{% endblock content %}
		</div>

		<script type="text/javascript" src="{% static 'js/cart.js' %}"></script>

		<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
	</body>
</html>